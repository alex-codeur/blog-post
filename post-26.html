<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <title>Blog</title>
</head>

<body>
    <div class="container">
        <h1>MongoDB: Le guide complet
        </h1>

        <h4>Table des mati√®res</h4>

        <ul>
            <li>L'origine de MongoDB</li>
            <li>Le projet initial</li>
            <li>La naissance de MongoDB</li>
            <li>Qu'est-ce que MongoDB en 2020</li>
            <li>Les produits MongoDB</li>
            <li>La communaut√© MongoDB</li>
            <li>Les atouts techniques de MongoDB</li>
            <li>Vitesse de lecture</li>
            <li>Performances √† l'√©criture</li>
            <li>Scalabilit√©</li>
            <li>Flexibilit√©</li>
            <li>Les fonctionnalit√©s incontournables</li>
            <li>Les agr√©gations</li>
            <li>Le full text search</li>
            <li>Les coordonn√©es GPS</li>
            <li>Les transactions</li>
            <li>Les limites de MongoDB</li>
            <li>La d√©normalisation √† outrance</li>
            <li>Les jointures</li>
            <li>La surindexation</li>
            <li>Pourquoi s'int√©resser √† MongoDB ?</li>
            <li>Comp√©tence recherch√©e</li>
            <li>Comment d√©marrer avec MongoDB ?</li>
            <li>Installer MongoDB</li>
            <li>Premi√®res requ√™tes CRUD</li>
            <li>Organiser ses collections</li>
            <li>Comprendre les agr√©gations</li>
            <li>Savoir indexer ses donn√©es pour am√©liorer les performances</li>
            <li>Alternatives √† MongoDB</li>
            <li>Comment apprendre MongoDB:</li>
            <li>Conclusion</li>
        </ul>

        <p>MongoDB est la solution de bases de donn√©es NoSQL la plus populaire. Ne vous y d√©trompez pas, le SQL domine
            toujours les projets web en production mais l'int√©r√™t que suscite MongoDB est croissant.</p>

        <p>Que ce soit par effet de mode ou pour une r√©elle solution technique √† une probl√©matique pour une application
            web, MongoDB compte aujourd'hui de nombreux gros clients et ambassadeurs.</p>

        <p>Dans ce guide, nous allons voir tout ce qu'il y a √† conna√Ætre sur cette technologie de base de donn√©es, le
            besoin auquel elle r√©pond ainsi que des conseils sur le fonctionnement et l'utilisation de MongoDB pour vos
            projets.</p>

        <h3>L'origine de MongoDB</h3>

        <h4>Le projet initial</h4>

        <p>C'est en Automne 2007 que Kevin Ryan, Dwight Merriman et Eliot Horowitz, entrepreneurs √† succ√®s fondent la
            soci√©t√© 10gen, avec pour but de proposer un produit Plateform as a Service, similaire √† Heroku, AWS Elastic
            Beanstalk ou Google App Engine, mais bas√© sur des composants opensource.</p>

        <p>Leur exp√©rience √† travers diff√©rents projets web tel que DoubleClick et ShopWiki leur ont appris qu'une
            application qui devient populaire va se heurter √† des probl√®mes de scalabilit√© au niveau de la base de
            donn√©es. Dans leur recherche d'une base de donn√©es √† int√©grer dans leur produit PaaS, aucune solution open
            source r√©pondait √† leurs besoins de scalabilit√© et de compatibilit√© avec une architecture cloud.</p>

        <p>C'est pourquoi, l'√©quipe de 10gen a d√©velopp√© en interne une nouvelle technologie de base de donn√©es NoSQL,
            orient√©e documents. Ils la baptiseront MongoDB, inspir√© du mot "Humongous" qu'on pourrait traduire par
            "Gigantesque", √† l'instar des donn√©es qu'elle est cens√©e h√©berger.</p>

        <h4>La naissance de MongoDB</h4>

        <p>Le produit PaaS d√©velopp√© par 10gen, baptis√© ed, ne trouvant pas vraiment preneur, les fondateurs ont d√©cid√©
            d'en extraire la technologie de base de donn√©es. En F√©vrier 2009, MongoDB est mis en open source et le
            nombre d'utilisateurs a cru de mani√®re exponentielle au sein du Google group rassemblant la communaut√©
            d'early adopters. Au 1er Mars 2009, seulement 9 threads existaient sur ce groupe, trois mois plus tard ce
            nombre s'√©levait √† 613 !</p>

        <p>MongoDB a √©t√© con√ßu pour la vitesse. Les donn√©es reposent sur des documents BSON, diminutif de binary JSON.
            Le BSON permet √† MongoDB d'√™tre d'autant plus rapide dans le calcul pour rechercher des donn√©es dans les
            documents. Afin d'√™tre encore plus performant dans ses requ√™tes, MongoDB invite √† la d√©normalisation de la
            donn√©e dans ses documents. L√† o√π une bonne pratique en SQL √©tait d'avoir des tables sp√©cifiques et cl√©s
            √©trang√®res pour faire r√©f√©rence √† une donn√©e lors de jointures, MongoDB encourage √† d√©normaliser en
            dupliquant la donn√©e l√† o√π elle est demand√©e. Bien que MongoDB propose des m√©canismes de r√©f√©rences, il
            faudra les utiliser √† bon escient afin de b√©n√©ficier des performances qu'apporte une base de donn√©es
            MongoDB.</p>

        <p>MongoDB a √©t√© con√ßu √† l'√®re du cloud et de l'infrastructure distribu√©e. Pour assurer la stabilit√©, un des
            concepts cl√© de MongoDB est d'avoir en permanence plus d'une copie de la base de donn√©es disponible dans le
            but d'assurer une disponibilit√© toujours aussi rapide m√™me en cas de d√©faillance de la machine h√¥te. Cette
            capacit√© √† r√©pliquer la base de donn√©es sur plusieurs machines dans plusieurs endroits facilement permet
            d'am√©liorer la scalabilit√© horizontale d'une base de donn√©es.</p>

        <p>MongoDB a √©t√© con√ßu pour la flexibilit√©. Contrairement aux bases de donn√©es SQL, les donn√©es d'une collection
            Mongo peuvent √™tre compl√®tement h√©t√©rog√®nes. C'est ce qu'on appelle le Schemaless. L'avantage de ne pas
            forc√©ment avoir de structure stricte de la donn√©e est de pouvoir faire √©voluer rapidement sa structure de
            donn√©e. Cette flexibilit√© est tr√®s appr√©ci√©e dans les projets au stade de prototype qui d√©couvrent encore
            comment leur donn√©e doit se structurer. Toutefois, le Schemaless a ses inconv√©nients. Il devient plus
            difficile de faire des op√©rations d'analyse sur la donn√©e si tous les documents ne suivent pas la m√™me
            structure. C'est pourquoi il est √©galement possible d'imposer un Schema √† la collection.</p>

        <h3>Qu'est-ce que MongoDB en 2020</h3>

        <h4>Les produits MongoDB</h4>

        <h5>MongoDB</h5>

        <p>Le coeur de m√©tier de MongoDB est sa technologie de base de donn√©es NoSQL orient√©e documents. Elle est
            aujourd'hui utilis√©e dans plus de 100 millions de projets.</p>

        <h5>MongoDB Atlas</h5>

        <p>MongoDB Atlas est la solution cloud de Database as a Service (DBaaS). Atlas vous d√©ploie un serveur MongoDB
            manag√© sur un cloud Amazon Web Services, Google Cloud Platform ou Microsoft Azure, dans la r√©gion de votre
            choix. Vous aurez le choix de la taille de votre cluster tout en ayant l'avantage d'avoir votre base de
            donn√©es manag√©e par l'√©quipe d'ing√©nieurs de MongoDB.</p>

        <p>Atlas propose m√™me un plan gratuit pour 500MB, id√©al pour vos projets perso ou pour exp√©rimenter.</p>

        <h5>MongoDB Stitch</h5>

        <p>MongoDB Stitch est une plateforme Serverless qui permet de construire une application directement depuis
            Mongo Atlas.</p>

        <h5>MongoDB Compass</h5>

        <p>MongoDB Compass est le client GUI officiel d√©velopp√© par MongoDB. Cet outil complet va vous permettre de
            consulter, modifier, ex√©cuter des requ√™tes ou des agr√©gations sur votre base de donn√©es locale ou cloud
            directement depuis son interface graphique. Le travail des designers Mongo offre une exp√©rience utilisateur
            et une interface agr√©able pour manipuler vos donn√©es.</p>

        <h5>MongoDB Realm</h5>

        <p>Realm est une base de donn√©es all√©g√©e embarqu√©e sur le client mobile. Dans le cas d'une application mobile,
            Realm vous permet de stocker une partie de la donn√©e directement sur l'appareil et de coordonner des
            synchronisations avec la base de donn√©es principale suivant diff√©rents √©v√©nements. C'est id√©al pour √©viter
            des requ√™tes r√©seau et permettre une meilleure utilisation hors ligne de l'application.</p>

        <h5>Charts</h5>

        <p>Charts est le moyen de cr√©er des graphiques pour visualiser votre donn√©e directement depuis MongoDB. Vous
            pourrez cr√©er plusieurs types de graphiques en vous basant sur la donn√©e que vous avez sur votre cluster
            Atlas et les int√©grer directement sur votre site directement en HTML. Charts permet d'exploiter vos donn√©es
            rapidement sans avoir √† d√©velopper une interface Frontend sp√©cifique pour ce besoin.</p>

        <h5>Cloud Manager</h5>

        <p>Cloud Manager est un outil complet de monitoring et d'optimisation de performance pour votre cluster sur
            MongoDB Atlas. Vous avez acc√®s √† une douzaine d'indicateurs √† travers votre base de donn√©es afin d'analyser
            les performances de comprendre les requ√™tes effectu√©es par votre application. Un syst√®me d'alerte peut √™tre
            configur√© pour vous pr√©venir d'urgences et se connecte nativement sur Slack, DataDog ou PagerDuty.</p>

        <p>Cloud Manager est √©galement capable d'identifier les requ√™tes lentes et sugg√©rer des index √† ajouter afin
            d'am√©liorer les performances de votre base de donn√©es.</p>

        <h5>Atlas Search</h5>

        <p>Atlas search est un des nouveaux n√©s de la famille Mongo Cloud. Il a pour but de concurrencer Algolia et
            ElasticSearch sur le terrain des moteurs de recherche. Il permet d'indexer sa donn√©e diff√©remment afin de
            pouvoir avoir une fonction de recherche plus fine et plus intelligente qu'une simple requ√™te avec filtres.
        </p>

        <h4>La communaut√© MongoDB</h4>

        <p>Tr√®s pr√©sente depuis les premiers instants de MongoDB, la communaut√© vit maintenant sur un forum tr√®s actif.
            Vous y trouverez des ressources pour apprendre, poser vos questions et d√©couvrir les bonnes pratiques.</p>

        <p>Cette grande communaut√© est un atout pour s'extirper de points bloquants lors de votre d√©veloppement et de
            trouver des solutions √† des probl√®mes √©pineux gr√¢ce √† l'intelligence collective.</p>

        <h3>Les atouts techniques de MongoDB</h3>

        <h4>Vitesse de lecture</h4>

        <h5>Duplication de la donn√©e</h5>

        <p>Depuis des ann√©es, la bonne pratique en SQL √©tait la normalisation des donn√©es. Afin d'assurer la meilleure
            fiabilit√© des donn√©es, il fallait √©viter la duplication et faire r√©f√©rence √† une autre table contenant les
            d√©finitions. Par exemple, dans un outil de gestion de clients, on trouverait une table adresse et une table
            ville. La table adresse utiliserait une cl√© √©trang√®re pour faire r√©f√©rence √† une ville plut√¥t que de saisir
            la ville dans la table adresse.</p>

        <p>Table clients:</p>

        <p>
            id Client ville_id
            1 Fran√ßois 1
            2 Marcel 2
            3 Guillaume 1
        </p>

        <p>Table ville:</p>

        <p>
            id ville
            1 Paris
            2 Lille
        </p>

        <p>Ce paradigme permettait d'√©viter de la duplication de donn√©e et permettait d'√©viter les erreurs de saisie,
            comme par exemple une faute de frappe ou une casse diff√©rente qui rendrait l'analyse fausse. Il √©tait aussi
            d√ª √† des contraintes mat√©rielles historiques d'une √©poque r√©volue o√π les infrastructures √©taient on premise
            et le co√ªt de stockage plus √©lev√© qu'aujourd'hui.</p>

        <p>MongoDB a fait le choix contraire d'encourager la duplication des donn√©es. En effet, en SQL comme en Mongo,
            les requ√™tes les plus lentes sont celles qui impliquent des r√©f√©rences √† d'autres tables ou d'autres
            collections. Aujourd'hui, le co√ªt de stockage √©tant bien plus faible et l'infrastructure distribu√©e √©tant
            bien prise en charge par MongoDB, il y a beaucoup moins de probl√®mes √† dupliquer la donn√©e.</p>

        <p>Bien qu'il soit possible de faire r√©f√©rence √† d'autres documents dans Mongo, il est encourag√© d'√©crire le
            maximum de donn√©e au sein d'un document. La limite d'un document √©tant de 16Mo, l'utilisation de la
            r√©f√©rence trouve son int√©r√™t lorsqu'un document devient trop lourd pour tout inclure.</p>

        <p>Prenons l'exemple d'un blog utilisant une base de donn√©es MongoDB. L√† o√π nous serions tent√©s d'avoir une
            collection Posts et une collection Comments, Mongo nous encourage √† inclure les commentaires dans le post.
            Il n'y a pas d'usages o√π nous aurions besoin de charger les commentaires sans les posts donc il est tout √†
            fait possible d'imbriquer les commentaires dans le document d'un article du blog.</p>

        <p>Cette imbrication permet √† MongoDB d'am√©liorer ses performances de lecture en ne lisant qu'un document plut√¥t
            qu'√† devoir en parcourir plusieurs et rassembler un objet pour le livrer au serveur.</p>

        <h5>Diversit√© des types index</h5>

        <p>Au coeur de sa vitesse de lecture r√©side la diversit√© des index propos√©s. L'utilisation et la combinaison de
            ces index permettent √† vos requ√™tes de parcourir un √©chantillon de la donn√©e au lieu d'effectuer la
            recherche sur l'ensemble de la collection. MongoDB offre la possibilit√© d'indexer un objet sur plusieurs
            champs, d'indexer un champ contenant un tableau d'√©l√©ments, d'indexer des coordonn√©es GPS et d'indexer un
            bloc de texte pour pouvoir faire une recherche dans son contenu.</p>

        <p>Comme pour toute base de donn√©es, la multiplication des index augmente la taille de la base de donn√©es et la
            lenteur √† l'√©criture. C'est pourquoi une strat√©gie d'index est cl√© pour avoir le minimum d'index possible
            tout en couvrant un maximum de requ√™tes provenant de l'application.</p>

        <h4>Performances √† l'√©criture</h4>

        <p>Comme on a pu le voir plus haut, un cluster de base de donn√©es MongoDB est r√©pliqu√© plusieurs fois, avec une
            base primaire et des r√©pliques consid√©r√©es comme secondaires. MongoDB peut pr√©senter des performances
            int√©ressantes m√™me √† l'√©criture gr√¢ce √† la notion de Write concerns. Plus une base est r√©pliqu√©e et/ou
            shard√©e (la notion de sharding est expliqu√©e ci-dessous), plus MongoDB doit aller √©crire la donn√©e √†
            diff√©rents endroits. Le write concern est la notion de confirmation d'√©criture. Par d√©faut, le write concern
            est d√©fini √† 1, c‚Äôest-√†-dire que lors d'une √©criture, MongoDB va √©crire la donn√©e une premi√®re fois sur la
            base de donn√©es primaire et vous retourner sa confirmation. Elle se chargera derri√®re les rideaux de
            coordonner les r√©plications.</p>

        <p>Suivant vos besoins, vous pourriez augmenter le write concern si vous voulez vous assurer que la donn√©e a √©t√©
            r√©pliqu√©e sur les bases de donn√©es secondaires de votre cluster, ou au contraire le r√©duire √† z√©ro pour
            d√©sactiver cet accus√© d'√©criture en base et augmenter d'autant plus la performance.</p>

        <h4>Scalabilit√©</h4>

        <p>En informatique comme dans la vie, la seule certitude est que quelque chose va mourir. Partant de ce constat
            et du positionnement Cloud first, MongoDB fait le choix de r√©pliquer votre base de donn√©es en plusieurs
            serveurs mongod. Un primaire et plusieurs r√©pliques. Si votre machine (virtuelle) h√©bergeant le serveur
            MongoDB venait √† √™tre d√©fectueuse, votre donn√©e reste tr√®s rapidement accessible gr√¢ce aux r√©pliques
            followers disponibles. La VM d√©fectueuse serait supprim√©e et un nouveau Leader √©mergerait pendant qu'un
            nouveau follower serait en cours de cr√©ation.</p>

        <p>La m√©thode la plus facile de scaler une base de donn√©es est le scaling vertical, qui consiste √† rendre la
            machine h√©bergeant la base de donn√©es plus puissante en ajoutant de la RAM, de l'espace disque et de la
            puissance CPU. Cette m√©thode est vite co√ªteuse car plus les composants sont puissants ou avec une grosse
            capacit√©, plus ils sont chers.</p>

        <p>L'autre m√©thode consiste √† scaler horizontalement, en ajoutant plus de machines pour h√©berger la m√™me base de
            donn√©es. Cette m√©thode est plus compliqu√©e car jusque-l√† les bases SQL perdaient en performances lors de
            requ√™tes qui impliquaient plusieurs machines.</p>

        <p>MongoDB propose la notion de Sharding. Cette m√©thode permet de distribuer la data √† travers plusieurs
            machines afin d'optimiser les performances des requ√™tes entrantes. La donn√©e va √™tre r√©partie √† travers
            diff√©rents fragments de la base de donn√©es et en utilisant un Shard Key, les requ√™tes mongo vont √™tre tr√®s
            efficaces pour aller r√©cup√©rer de la donn√©e directement dans le fragment qui la contient.</p>

        <h4>Flexibilit√©</h4>

        <p>Contrairement aux bases SQL, une base MongoDB n'a pas forc√©ment besoin d'avoir une structure de donn√©e fixe
            pour l'ensemble des objets pr√©sents dans une collection.</p>

        <p>En effet, en SQL si vous souhaitez ajouter une colonne √† votre table Clients, il faudra faire une migration
            pour ajouter une colonne et cette propri√©t√© sera NULL pour tous les clients n'ayant pas ce champ renseign√©.
        </p>

        <p>Avec MongoDB, vous pouvez faire du Schemaless. Un client pourra avoir le champ "FAX" parce qu'il est un des
            derniers sp√©cimens sur terre √† poss√©der une telle machine sans pour autant que tous les clients aient √†
            avoir cette propri√©t√©.</p>

        <p>Le fait de proposer du Schemaless permet un prototypage rapide. C'est une fonctionnalit√© int√©ressante pour
            les projets qui cherchent encore la fa√ßon dont leurs donn√©es vont √™tre structur√©es.</p>

        <p>En revanche, le Schemaless apporte ses limites lorsqu'il s'agit de faire de l'agr√©gation de donn√©es pour en
            faire une analyse.</p>

        <h3>Les fonctionnalit√©s incontournables</h3>

        <h4>Les agr√©gations</h4>

        <p>Le but de toute base de donn√©es est de stocker et ordonner de la donn√©e en vue de pouvoir l'exploiter. Pour
            pouvoir exploiter ces donn√©es, MongoDB propose des op√©rateurs d'agr√©gations.</p>

        <p>Les agr√©gations sont des s√©ries d'op√©rations de manipulation sur une donn√©e en vue de produire un document
            sp√©cifique. Elles permettent d'extraire certaines donn√©es d'objets, de les grouper, de les assembler dans un
            nouveau format afin de pouvoir r√©cup√©rer la donn√©e structur√©e comme on le souhaite.</p>

        <h4>Le full text search</h4>

        <p>L'index Text de MongoDB permet aux utilisateurs de rechercher sp√©cifiquement du texte √† l'int√©rieur d'un
            objet. Par exemple pour rechercher un mot-cl√© dans une s√©rie d'articles de blog.</p>

        <h4>Les coordonn√©es GPS</h4>

        <p>MongoDB propose √©galement des index G√©ospatiaux qui permettent de d√©finir un point via des coordonn√©es GPS,
            ou une aire, √† partir d'un point central et d'un rayon ou bien √† partir de plusieurs points afin de d√©finir
            une zone sp√©cifique.</p>

        <p>Cette fonctionnalit√© est utile pour stocker des lieux et calculer la distance entre plusieurs points.</p>

        <h4>Les transactions</h4>

        <p>MongoDB garde la r√©putation qu'il n'est pas possible de faire une op√©ration de transaction et qu'il faut
            privil√©gier une base SQL dans le cas o√π c'est une fonctionnalit√© essentielle √† votre application.</p>

        <p>
        <h5>Qu'est-ce qu'une transaction?</h5>
        Lorsqu'un geste m√©tier dans une application n√©cessite que plusieurs op√©rations en base de donn√©es se d√©roulent
        pour √™tre consid√©r√©es comme compl√®te, il s'agit d'une transaction.</p>

        <p>Par exemple, lorsqu'un virement bancaire a lieu, il faut absolument que l'argent sur le compte A soit d√©duit
            ET qu'il soit cr√©dit√© sur le compte B. Si l'op√©ration d'√©criture √©chouait en plein milieu, le compte A se
            retrouverait d√©bit√©, le compte B ne serait pas cr√©dit√© et le montant transf√©r√© serait perdu dans la nature.
            Lors d'une transaction, si l'op√©ration n'est pas compl√®tement termin√©e, la base de donn√©es effectue un
            Rollback avant de signaler l'erreur.</p>

        <p><strong>MongoDB n'a pas toujours su faire les transactions.</strong>
            Souvenez-vous, MongoDB est con√ßu pour √™tre distribu√© sur plusieurs machines. Dans l'exemple de la
            transaction bancaire, on peut imaginer que les comptes se situent sur diff√©rentes machines, dans diff√©rentes
            r√©gions du monde. Il est donc d'autant plus compliqu√© de faire ce genre d'op√©rations et de garantir son
            atomicit√©.</p>

        <p><strong>MongoDB a introduit les transactions √† travers les collections shard√©es avec la version 4.2.</strong>
            Il est maintenant possible d'effectuer des transactions sur plusieurs documents, m√™me si la collection est
            shard√©e sur plusieurs machines.

        </p>

        <h3>Les limites de MongoDB</h3>

        <p>Toutes ces belles fonctionnalit√©s de MongoDB semblent faire d'elle une techno √† toute √©preuve. Or dans la
            tech, la seule v√©rit√© est qu'il n'y a pas de "Silver bullet". Toute fonctionnalit√© vient en √©change d'un
            co√ªt.</p>

        <p>Voici les limites de mongoDB</p>

        <h4>La d√©normalisation √† outrance</h4>

        <p>Comme on l'a vu, MongoDB incite √† la d√©normalisation. Que ce soit dans la documentation et les ressources de
            formation officielle de MongoDB University, il vous est encourag√© de dupliquer votre donn√©e dans la mesure
            du possible.</p>

        <p>Bien que √ß√† paraisse pertinent au vu des faibles co√ªts des capacit√©s de stockage aujourd'hui, cette
            duplication va cr√©√© un nouveau probl√®me: l'int√©grit√© des donn√©es.</p>

        <p>Imaginez qu'il faille mettre √† jour plusieurs collections √† chaque fois qu'un utilisateur va corriger son
            adresse. Cette complexit√© s'ajoute √† la charge des d√©veloppeurs qui, √† chaque fois qu'ils vont toucher une
            fonctionnalit√© qui fait r√©f√©rence aux adresses, vont devoir se charger de coordonner l'update dans toutes
            les collections.</p>

        <p>Ce genre de duplication va provoquer des erreurs o√π deux collections vont avoir des donn√©es contradictoires
            et il faudra cr√©er des batch de redressement pour corriger la donn√©e.</p>

        <h4>Les jointures</h4>

        <p>Les jointures ont √©t√© introduites dans MongoDB avec l'agr√©gat $lookup depuis la version 3.2. Cette
            fonctionnalit√© vient r√©pondre aux besoins dans les cas o√π la d√©normalisation n'est pas une option et qu'il
            n'y a pas d'autre choix que de cr√©er une r√©f√©rence √† un autre objet.</p>

        <p>Or mongoDB n'a pas √©t√© con√ßu pour ce type de besoin et les performances d'une requ√™te avec un agr√©gat $lookup
            sont bien moins int√©ressantes. Vous perdez l'avantage initial que propose MongoDB.</p>

        <p>Si votre application a besoin de mettre en relation beaucoup de donn√©es, le choix de MongoDB n'est peut-√™tre
            pas le bon.</p>

        <h4>La surindexation</h4>

        <p>MongoDB plait par ses performances. Or pour arriver √† ces performances sur un maximum de requ√™tes, vous serez
            incit√© √† cr√©er de plus en plus d'index.</p>

        <p>Cette sur-indexation va taxer les performances √† l'√©criture de votre base de donn√©es.</p>

        <p>Chaque ajout d'un objet dans la collection va n√©cessiter une cr√©ation d'une multitude d'index dans plusieurs
            collections, ce qui va √™tre gourmand en ressources de votre base de donn√©es.</p>

        <p>Vous pourriez √™tre tent√©s de coupler une base MongoDB pour la lecture uniquement et avoir une base d√©di√©e √†
            l'√©criture, telle que Cassandra, qui viendrait alimenter plus tranquillement la base de donn√©es MongoDB.
            Cette solution, bien que fonctionnelle, ajoute une immense complexit√© √† votre application et est souvent le
            fruit d'une mauvaise utilisation de vos index.</p>

        <p>Souvenez-vous, vous n'√™tes pas Facebook, vous ne devriez pas avoir leur niveau de complexit√©.</p>

        <h3>Pourquoi s'int√©resser √† MongoDB ?</h3>

        <h4>Comp√©tence recherch√©e</h4>

        <p>Le succ√®s qu'a connu MongoDB aupr√®s des d√©veloppeurs s'est √©galement retrouv√© au sein des projets
            d'entreprises. Aujourd'hui, on retrouve des projets utilisant MongoDB dans des Startups, des grands groupes,
            des projets gouvernementaux et des associations.</p>

        <p>Parmi les utilisateurs Fraan√ßais de MongoDB on retrouve entre autre AXA, Bouygues Telecom et Leroy Merlin. A
            l'heure o√π j'√©cris cette page, plus de 2000 offres d'emploi en France mentionnent MongoDB sur Linkedin.</p>

        <h5>Qui devrait apprendre √† utiliser MongoDB ?</h5>

        <p>Tout d√©veloppeur Backend, quelle que soit la techno utilis√©e aurait int√©r√™t √† se former sur les bases de
            MongoDB. Apprendre √† cr√©er une base de donn√©es et faire les premi√®res requ√™tes CRUD est suffisant dans un
            premier temps si vous n'avez pas de projet pour le mettre en application.</p>

        <p>Les d√©veloppeurs Fullstack JavaScript ont √©galement beaucoup √† y gagner. Les stacks employ√©s pour les projets
            JavaScript utilisent plus souvent MongoDB. C'est une comp√©tence qui vous sera probablement plus demand√©e
            qu'un d√©veloppeur PHP.</p>

        <h3>Comment d√©marrer avec MongoDB ?</h3>

        <h4>Installer MongoDB</h4>

        <p>MongoDB est disponible sur toutes les plateformes. Vous trouverez nos guides d'installations pour les
            diff√©rents OS:</p>

        <ul>
            <li>Installer MongoDB sur MacOS</li>
            <li>Installer MongoDB sur Linux</li>
            <li>Installer MongoDB sur Windows</li>
        </ul>

        <h4>Premi√®res requ√™tes CRUD</h4>

        <p>D√©marrer avec MongoDB est tr√®s simple. Il suffit de lancer son serveur Mongo sur son poste avec la commande
            mongod ou via une image Docker. Ensuite il suffit de saisir la commande mongo pour acc√©der au Mongo Shell et
            effectuer ses premi√®res requ√™tes MongoDB.</p>

        <h4>Organiser ses collections</h4>

        <p>Si vous aviez l'habitude de d√©velopper vos applications en utilisant des bases de donn√©es RDBMS telles que
            MySQL ou PostgreSQL, la fa√ßon dont les donn√©es sont mod√©lis√©es dans MongoDB va vous demander de remettre en
            question votre fa√ßon de faire.</p>

        <p>En SQL, la bonne pratique a longtemps √©t√© de normaliser ses donn√©es. Une table fera r√©f√©rence aux donn√©es
            dans une autre via une Foreign Key, √©vitant ainsi la duplication de donn√©e et d'√©ventuelles inconsistances
            entre diff√©rents objets de la base.</p>

        <p>En MongoDB, cette strat√©gie est d√©laiss√©e en dernier recours en faveur de la duplication de donn√©e. Suivant
            le volume de donn√©e √† mettre en relation, on va opter pour diff√©rentes strat√©gies.</p>

        <p>MongoDB propose d'arbitrer entre deux strat√©gies. La relation √† un autre document, telle qu'on la connait
            dans les bases RDBMS, ou embed, qui se traduirait par inclure, dans le document d'origine.</p>

        <p>Par exemple, un article de blog avec ses commentaires mis en relation:</p>

        <div class="jumbotron">
            {
            "_id":"iqdsfjaf9043ngfdslk9",
            "title":"MongoDB: Le guide complet pour utiliser la base de donn√©es NoSQL de r√©f√©rence en 2020",
            "body":"MongoDB est une base de donn√©es NoSQL...",
            "comments": ["6qd77a03faf1f8436048q8", "5db57a04faf1f8434098f7f9"]
            }
        </div>

        <p>en relation avec les commentaires stock√©s dans la collection correspondante:</p>

        <div class="jumbotron">
            [{
            "_id": "6qd77a03faf1f8436048q8",
            "username": "Marc",
            "text": "Super article",
            "createdAt": "2019-10-27T11:05:39.898Z",
            },
            {
            "_id": "5db57a04faf1f8434098f7f9",
            "username": "Jean",
            "text": "MongoDB n'est pas du tout adapt√© aux gros projets, c'est un jouet",
            "createdAt": "2019-10-27T11:05:40.710Z"
            }]
        </div>

        <p>Ou alors, MongoDB propose d'inclure les commentaires directement dans l'objet Post de la mani√®re suivante:
        </p>

        <div class="jumbotron">
            {
            "_id":"iqdsfjaf9043ngfdslk9",
            "title":"MongoDB: Le guide complet pour utiliser la base de donn√©es NoSQL de r√©f√©rence en 2020",
            "body":"MongoDB est une base de donn√©e NoSQL...",
            "comments": [
            {
            "_id": "6qd77a03faf1f8436048q8",
            "username": "Marc",
            "text": "Super article",
            "createdAt": 2019-10-27T11:05:39.898Z
            },
            {
            "_id": "5db57a04faf1f8434098f7f9",
            "username": "Jean",
            "text": "MongoDB n'est pas du tout adapt√© aux gros projets,
            c'est un jouet",
            "createdAt": 2019-10-27T11:05:40.710Z
            }
            ]
            }
        </div>

        <p>Suivant la nature de vos documents et le nombre de relations, une strat√©gie sera plus pr√©f√©rable qu'une
            autre.</p>

        <h5>Relations 1-to-1</h5>

        <p>Dans le cas d'une relation one-to-one, on privil√©giera le plus souvent une strat√©gie d'embed √† une r√©f√©rence.
            Prenons l'exemple d'un client et une commande</p>

        <div class="jumbotron">
            // L'objet client
            {
            _id: "abc",
            lastName: "Martin",
            firstName: "Pierre",
            email: "pierre.martin@gmail.com"
            }

            // L'objet commande

            {
            _id:'def'
            client: {
            lastName: 'Martin',
            firstName: 'Pierre',
            email:'pierre.martin@gmail.com'
            }
            currency: 'Eur'
            amount: 1000
            created_at: 2020-07-31,
            updated_at: 2020-07-31
            }
        </div>

        <p>Dans ce cas, l'objet client est suffisamment petit et pertinent pour l'inclure compl√®tement dans l'objet
            commande.</p>

        <p>Admettons maintenant que notre objet client soit bien plus riche en donn√©es:</p>

        <div class="jumbotron">
            // L'objet client
            {
            _id: "abc",
            lastName: "Martin",
            firstName: "Pierre",
            email: "pierre.martin@gmail.com",
            dateOfBirth: 1987-05-06,
            jobTitle: 'Ing√©nieur',
            company: 'Soci√©t√© G√©n√©rale',
            address: {
            number: "4ter",
            street: "Rue Ranelagh",
            postalCode: "75016",
            city: "Paris"
            },
            CIN: 187057534298717,
            premium: true,
            lastVisit: 2020-07-12,
            }
        </div>

        <p>Beaucoup de ces champs ne sont pas pertinents dans le cadre d'une commande. Afin d'√©viter d'alourdir
            inutilement notre objet Commande, on peut employer une strat√©gie de subset embed qui consiste √† inclure dans
            le document commande uniquement les champs qui sont pertinents pour le traitement de celle-ci.</p>

        <div class="jumbotron">
            {
            id:'def'
            client: {
            _id: 'abc',
            lastName: 'Martin',
            firstName: 'Pierre',
            }
            currency: 'Eur'
            amount: 1000
            created_at: 2020-07-31,
            updated_at: 2020-07-31
            }
        </div>

        <p>Cette strat√©gie permet d'avoir acc√®s √† la propri√©t√© _id de Client, au cas o√π nous aurions besoin de faire une
            requ√™te pour avoir tous les d√©tails du client, tout en proposant directement la donn√©e la plus utilis√©e dans
            le document Commande.</p>

        <h5>Relations 1-to-Many</h5>

        <p>Dans la plupart des cas, la strat√©gie d'embed dans les relations 1-to-Many apportera la meilleure
            performance. Au m√™me titre que l'exemple fourni dans une relation 1-to-1 ci-dessus, le fait d'embed la
            donn√©e de l'objet cible dans l'objet d'origine apporte des gains √† la lecture.</p>

        <p>Par exemple, un site e-commerce pourrait inclure les avis dans l'objet article</p>

        <div class="jumbotron">
            {
            _id: "abc",
            name: "Clean Code",
            price: 19.99,
            reviews: [
            {client:"Tom", rating:5, comment:"Tr√®s bon livre"},
            {client:"Marc", rating:4, comment:"Exemples pertinents"},
            ]
            }
        </div>

        <p>L'usage le plus commun pour un site marchand est d'afficher la page produit avec les avis clients. De ce
            fait, en une requ√™te simple la page a toutes les informations n√©cessaires pour produire la page.</p>

        <p>Si le frontend veut proposer une page regroupant les avis de Marc sur l'ensemble des produits, il suffirait
            de faire une requ√™te d'agr√©gation sur les reviews contenant le client Marc dans la collection article.</p>

        <p>En revanche, le fait d'embed l'article cible dans l'article d'origine peut poser probl√®me si le tableau est
            amen√© √† cro√Ætre significativement. En effet, MongoDB ne va pas appr√©cier avoir un objet contenant un tableau
            d'une longueur de 10 000.</p>

        <p>Prenons l'exemple d'un Post Instagram d'Ariana Grande, qui poss√®de un des comptes avec le plus de followers.
        </p>

        <p>Le post en question contient plus de 68k commentaires et inclure chaque commentaire dans l'objet Post ferait
            d√©passer les limites de 16Mo que MongoDB impose pour chaque document.</p>

        <p>Dans ce cas, la solution est de retourner le probl√®me et d'inclure une r√©f√©rence au post dans l'objet
            commentaire. On passe donc √† une relation 1-to-1 o√π on va seulement mentionner l'id du post dans le document
            commentaire.</p>

        <div class="jumbotron">
            {
            _id:'abc'
            post_id:'xyz',
            user: 'khloekardashian',
            comment: 'Happy birthday beautiful ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è'
            },
            {
            _id:'def'
            post_id:'xyz',
            user: 'djsnake',
            comment: 'ü¶ã'
            }
        </div>

        <p>Dans ce cas, la r√©f√©rence se fait sur l'objectId du document Post et une requ√™te d'agr√©gation permettrait de
            r√©cup√©rer et formater le post et les commentaires.</p>

        <h4>Comprendre les agr√©gations</h4>

        <p>Parfois, l'information dont on a besoin n'est pas stock√©e telle quelle dans notre base de donn√©es. Vous
            pourriez avoir besoin d'une somme, d'une moyenne, de regrouper une partie des documents seulement.</p>

        <p>Pour ce faire, MongoDB propose les agr√©gations. Il s'agit d'op√©rations capables de se succ√©der afin de
            manipuler la donn√©e et retourner un ou plusieurs documents modifi√©s pour correspondre au besoin que vous
            avez.</p>

        <p>Imaginons une collection Commandes d'un McDonald's:</p>

        <div class="jumbotron">
            [
            {
            _id: abc,
            contenu: [
            {sku: "BigMac", quantity: 1},
            {sku: "Moyenne frite", quantity: 1},
            {sku: "Moyen Coca Zero", quantity: 1},
            {sku: "Grand Coca Cola", quantity: 1},
            {sku: "Grande frite", quantity: 1},
            {sku: "280", quantity: 1}
            ],
            total: 21.40
            type: "drive"
            created_at: "2020-07-27T13:07:41.657Z"
            },
            {
            _id: bcd,
            contenu: [
            {sku: "CBO", quantity: 1},
            {sku: "Moyenne potatoe", quantity: 1},
            {sku: "Moyen Fanta", quantity: 1},
            {sku: "Grand Coca Cola", quantity: 1},
            {sku: "Grande frite", quantity: 1},
            {sku: "BigMac", quantity: 1},
            {sku: "Sundae Chocolat", quantity: 1}
            ],
            total 26.10
            type: "drive"
            created_at: "2020-07-27T13:07:55.657Z"
            },
            {
            _id: cde,
            contenu: [
            {sku: "CBO", quantity: 1},
            {sku: "Moyenne frite", quantity: 1},
            {sku: "Moyen Sprite", quantity: 1},
            {sku: "Grand Coca Cola", quantity: 1},
            {sku: "Grande frite", quantity: 1},
            {sku: "280", quantity: 1}
            ],
            type: "a emporter"
            total: 23.80
            created_at: "2020-07-27T13:08:41.657Z"
            },
            {
            _id: def,
            contenu: [
            {sku: "Grand Coca Cola", quantity: 1},
            {sku: "Grande frite", quantity: 1},
            {sku: "280", quantity: 1}
            ],
            type: "a emporter"
            total: 9.70
            created_at: "2020-07-27T13:09:41.657Z"
            },
            {
            _id: efg,
            contenu: [
            {sku: "Grand Coca Cola", quantity: 1},
            {sku: "Grande frite", quantity: 1},
            {sku: "BigMac", quantity: 1}
            ],
            type: "a emporter"
            total: 8.70
            created_at: "2020-07-27T13:09:42.657Z"
            },
            {
            _id: fgh,
            contenu: [
            {sku: "Grand Coca Cola", quantity: 2},
            {sku: "Grande frite", quantity: 2},
            {sku: "BigMac", quantity: 2}
            ],
            type: "a emporter"
            total: 9.70
            created_at: "2020-07-27T13:09:42.657Z"
            }
            ]
        </div>

        <p>Utiliser les agr√©gations mongodb vous permettrait de ressortir des donn√©es telles que le nombre de Bigmac
            vendu par jour, le classement des produits les plus vendus sur un mois, le ticket moyen par type de
            commande...</p>

        <p>N'h√©sitez pas √† consulter notre page sur les agr√©gations mongo pour d√©couvrir les op√©rateurs les plus
            courants et comment vous en servir</p>

        <h4>Savoir indexer ses donn√©es pour am√©liorer les performances</h4>

        <p>Les index sont la cl√© du succ√®s d'une base de donn√©es MongoDB. C'est gr√¢ce √† eux qu'une requ√™te va pouvoir
            fournir la donn√©e de mani√®re la plus efficace possible.</p>

        <h5>Qu'est-ce qu'un index?</h5>

        <p>Prenons l'exemple d'une encyclop√©die. Pour trouver la page qui parle du "syst√®me solaire" vous demanderait de
            parcourir l'ensemble des pages de l'encyclop√©die, jusqu'√† trouver la bonne. En consultant d'abord l'index,
            les diff√©rentes notions y sont rang√©es par ordre alphab√©tique, vous pourrez tr√®s rapidement trouver la ligne
            qui correspond au "syst√®me solaire" qui va vous indiquer la page o√π vous rendre pour retrouver tout son
            contenu.</p>

        <p>Quelle que soit la base de donn√©es, un index est une copie partielle de la donn√©e rang√©e de telle sorte √† ce
            que le moteur puisse rapidement la retrouver.</p>

        <h5>Les index dans MongoDB</h5>

        <p>En suivant une strat√©gie d'indexation pertinente, vous am√©liorerez grandement les performances de lecture de
            votre base de donn√©es. Plus vous avez d'index, plus votre base de donn√©es va pouvoir r√©pondre aux
            diff√©rentes requ√™tes rapidement.</p>

        <p>Attention toutefois √† avoir une strat√©gie d'indexation pertinente et ne pas abuser de l'outil. En effet,
            ajouter un index revient √† faire une copie d'un fragment de la donn√©e. Non seulement cet index rajoute du
            poids √† l'ensemble de votre base de donn√©es, il ralentit √©galement les op√©rations d'√©critures. Si la
            collection User a 14 index diff√©rents, lorsque vous ins√©rerez un nouvel utilisateur, MongoDB devra recopier
            14 fragments de donn√©es, ce qui a un co√ªt en termes de performance.</p>

        <p>MongoDB brille par la diversit√© de ses index. Gr√¢ce √† ses diff√©rentes options, vous pourrez cat√©goriser les
            donn√©es cl√©s de votre base de donn√©es √† travers diff√©rents types d'index. Cette diversit√© permet d'avoir une
            performance de lecture optimale tout en minimisant le co√ªt √† l'√©criture.</p>

        <h4>Alternatives √† MongoDB</h4>

        <p><strong>DynamoDB</strong> est le service de base de donn√©es NoSQL made in AWS. Elle est souvent oppos√©e √†
            MongoDB bien qu'ils ne soient pas vraiment similaires. DynamoDB est compl√®tement manag√© par AWS et il n'est
            pas possible de l'avoir sur son propre environnement on premise ou sur un cloud concurrent. De plus DynamoDB
            est plus proche d'une base cl√©-valeur qu'une base orient√©e documents. Chaque √©l√©ment dans la base de donn√©es
            est stock√© dans une table contenant un id et les tables peuvent √™tre index√©es pour effectuer des requ√™tes
            plus rapidement. Dynamo s'int√®gre parfaitement avec les autres produits AWS et permet de sous traiter une
            certaine logique √† l'infrastructure. Par exemple, si vous avez besoin de r√©agir √† la mise √† jour d'un
            √©l√©ment dans la base de donn√©es, DynamoDB vous offre cette possibilit√© sans que vous ayez √† coder cette
            logique dans votre application.</p>

        <p><strong>RethinkDB</strong> est une base de donn√©es NoSQL orient√©e documents qui se positionne sur les donn√©es
            en temps r√©el. Elle pousse la donn√©e √† votre application √† chaque fois qu'un √©v√®nement se produit. RethinkDB
            est open source et par cons√©quent peut se d√©ployer sur l'infrastructure on premise ou cloud de votre choix.
            C'est un excellent choix si vous avez besoin de cr√©er une application r√©active √† la donn√©e comme un tableau
            de bord mais elle ne supporte pas les principes ACID et un sch√©ma de donn√©es strict. De m√™me, si vous
            effectuez beaucoup de calculs sur vos donn√©es, une base de donn√©es type colonne telle que Cassandra sera
            plus adapt√©e.</p>

        <p><strong>FaunaDB</strong> est une base de donn√©es transactionnelle, orient√©e document, sp√©cialis√©e sur le
            Serverless. Avec Fauna, les d√©veloppeurs n'ont plus √† se soucier de configurer un cluster. Les donn√©es sont
            automatiquement r√©pliqu√©es sur plusieurs r√©gions et accessibles via API. Contrairement aux autres
            technologies,FaunaDB est op√©r√©e exclusivement par Fauna qui choisira d'op√©rer ses infrastructures o√π elle
            l'entend. Particuli√®rement adapt√© aux infrastructures Serverless, FanuaDB a su se faire une place dans
            l'√©cosyst√®me Next.JS en venant concurrencer DynamoDB et l'offre Serverless de MongoDB Atlas qui est arriv√©e
            avec la version 5.0, apr√®s que FaunaDB ait pu se faire une place.</p>

        <h3>Comment apprendre MongoDB:</h3>

        <p>L'universit√© Mongo est une excellente ressource, en anglais, pour apprendre et manipuler MongoDB. Gr√¢ce √† une
            s√©rie de vid√©os, de quiz et d'exercice, vous apprendrez √† votre rythme les diff√©rentes notions de MongoDB.
        </p>

        <p>La difficult√© est progressive et vous pouvez sauter les premiers modules si vous √™tes d√©j√† familiers avec les
            bases de MongoDB. Ils proposent √©galement d'utiliser gratuitement MongoDB Atlas pour h√©berger votre base de
            donn√©es et fournissent les jeux de donn√©es pour vous exercer.</p>

        <h3>Conclusion</h3>

        <p>Bien que MongoDB e√ªt √©t√© con√ßu pour une fin bien sp√©cifique qui √©tait une utilisation dans le cloud
            distribu√©, son √©volution et la pratique du d√©veloppement web en font une base de donn√©es multi-usages.</p>

        <p>Aujourd'hui, √† moins d'avoir une raison claire de ne pas utiliser MongoDB, c'est la technologie de base de
            donn√©es la plus flexible et la plus adapter pour d√©marrer un projet.</p>
    </div>
</body>

</html>